"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50413],{50413:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ue}});var o,i=n(20348),a=n(32868),r=n(79003),s=n(58055),d=n(70989),l=n(31428),c=n(27018),u=n(29799),p=n(93586),h=n(89703),g=n(63048),f=n(49227),v=n(25937),C=n(34560),m=n(11141),y=n(5825),x=n(23838),j=n(26010),b=n(99859),S=n(54758),w=n(60907),O=n(75365),Z=n(17730),I=n(7032),k=n(35151),E=n(48578),T=n(786),D=n.n(T),P=n(72930),H=n(46606),N=n(18182),L=n(4083),R=n(18622),_=n(60374),A=n(42226),F=n(30583),V=n(91936),M=n(33212);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var W="border border-solid border-gray-300",K="".concat(W," font-mono bg-gray-100 p-2.5 overflow-y-scroll dark:bg-dark-90"),z="".concat(K," border border-solid border-error dark:bg-dark-90"),J="".concat(W," dark:border-gray-A100"),B="".concat(J," dark:bg-dark-70"),$=function(e){var t=e.time;return t?(0,i.jsx)("p",{className:"text-right text-gray-600 m-4",children:t}):null},G=function(e){var t=e.stdout,n=e.stderr;return(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)("div",{className:K,children:(0,i.jsx)("p",{children:t})}),n&&(0,i.jsx)("div",{className:z,children:(0,i.jsx)("p",{children:n})})]})},Q=function(e){var t=e.onRemoveTab,n=e.name,o=e.index,a=e.icon,r=e.cb,s=e.isSelected;return(0,i.jsxs)(H.OK,{className:"flex justify-between p-3 cursor-pointer h-12 hover:bg-gray-200 dark:bg-dark-90",selectedClassName:"flex justify-between p-3 cursor-pointer h-12 bg-white border-0 border-solid border-primary border-b-4",selected:s,children:[(0,i.jsxs)("div",{className:"flex justify-start flex-grow items-center truncate mr-2",children:[(0,i.jsx)("span",{className:"flex flex-col justify-center items-center pr-2",children:(0,i.jsx)(a,{className:"w-4 h-4 text-gray-900 dark:text-dark-contrastText fill-current ".concat("Console"===n&&"stroke-current")})}),(0,i.jsx)("span",{className:"overflow-ellipsis overflow-hidden text-sm",children:n})]}),(0,i.jsx)("div",{className:"flex flex-col justify-center items-center",onClick:function(e){e.stopPropagation(),e.preventDefault(),t(o),r()},children:(0,i.jsx)(N.Z,{className:"w-4 h-4 text-gray-900 dark:text-gray-500 fill-current"})})]})};Q.tabsRole="Tab";var q=function(e){var t=function(t,n){t.preventDefault(),t.stopPropagation(),e.onViewChange(n)},n=e.currentView,o=e.onConsoleClick,a=e.showConsole,r=function(e){return"px-3 py-1.5 ".concat(n===e?"contained-primary":"icon-default")},s=function(e){return"w-6 h-6 fill-current".concat(n===e?" text-white":"")};return(0,i.jsxs)("div",{className:"flex my-1.5 mx-3 ml-auto",children:[(0,i.jsx)("button",{className:"mx-2 px-3 py-1.5 outlined-default",onClick:o,children:"".concat(a?"Hide":"Show"," Console")}),(0,i.jsxs)("div",{className:"flex border border-solid border-gray-300 dark:border-dark-70",children:[(0,i.jsx)("button",{className:r(M.UZ.STACK),onClick:function(e){return t(e,M.UZ.STACK)},children:(0,i.jsx)(L.Z,{className:s(M.UZ.STACK)})}),(0,i.jsx)("button",{className:r(M.UZ.TABS),onClick:function(e){return t(e,M.UZ.TABS)},children:(0,i.jsx)(R.Z,{className:s(M.UZ.TABS)})})]})]})},X=(o={},(0,p.Z)(o,M.yz.HINTS,_.Z),(0,p.Z)(o,M.yz.RESULTS,(function(e){var t=e.executionResult;if(!t)return null;if(t.loading)return(0,i.jsx)(A.Z,{className:"mt-8",statusData:{status:"WAIT",text:"Executing your code"},isExecution:!0});var n=t.test_results,o=t.execution_result.time,a=n.map((function(e){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:J,children:e.succeeded?(0,i.jsx)(V.Jr,{}):(0,i.jsx)(V.X,{})}),(0,i.jsx)("td",{className:J,children:e.actual_output})]})}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{time:o}),(0,i.jsxs)(F.Z,{responsive:!0,bordered:!0,children:[(0,i.jsx)("thead",{className:J,children:(0,i.jsxs)("tr",{className:J,children:[(0,i.jsx)("th",{className:B,children:"Result"}),(0,i.jsx)("th",{className:B,children:"Output"})]})}),(0,i.jsx)("tbody",{children:a})]})]})})),(0,p.Z)(o,M.yz.CONSOLE,(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({execution_result:{}},e.executionResult).execution_result,n=t.stderr,o=t.stdout,a=t.time;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-baseline",children:[(0,i.jsx)("div",{className:"flex-grow flex justify-center",children:(0,i.jsx)("p",{className:"text-sm text-center bg-gray-100 p-2 mt-2 dark:bg-dark-90",children:"Output"})}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)($,{time:a})})]}),(0,i.jsx)("div",{className:"mx-6",children:(0,i.jsx)(G,{stdout:o,stderr:n})})]})})),o);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=(0,P.default)((function(){return n.e(47533).then(n.bind(n,47533))}),{ssr:!1,loadableGenerated:{webpack:function(){return[47533]},modules:["../components/widgets/Code/ProjectEvaluation/stackPanel.tsx -> react-split"]}}),ne=function(e,t){return{cursor:"row-resize",display:t[e]?"flex":"none","align-items":"center","justify-content":"center","z-index":999}},oe=function(e,t){var n=document.createElement("div");return n.innerHTML='<div style="display: flex; height: 8px; align-items: center;">&#x22EF;</div>',n.className="gutter gutter-".concat(t," bg-gray-200 dark:bg-dark-80"),n},ie=function(e){var t=e.onViewChange,n=e.currentView,o=e.tabs.openTabs,a=e.onConsoleClick,r=e.showConsole,s=e.onRemoveTab,d=e.toggleProjectHints,l=function(){var e=o.length,t=Math.floor(100/e);return new Array(M.ee).fill(0).fill(t,0,e)}();return o.length?(0,i.jsx)(te,{sizes:l,direction:"vertical",expandToMin:!0,snapOffset:30,minSize:function(e){return e.map((function(e){return e?170:0}))}(l),className:"flex flex-col w-full h-full",cursor:"row-resize",gutterStyle:function(e,t,n){return ne(n,l)},gutter:oe,children:l.map((function(l,c){if(!l)return(0,i.jsx)("div",{});var u=o[c],p=X[u];return(0,i.jsx)("div",{children:(0,i.jsxs)(H.mQ,{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center bg-gray-100 dark:bg-dark-90",children:[(0,i.jsx)(H.td,{className:"flex border-0 p-0 m-0",children:(0,i.jsx)(Q,{name:u,icon:M.hi[u],index:c,onRemoveTab:s,cb:u===M.yz.HINTS?d:function(){},isSelected:!0})}),!c&&(0,i.jsx)(q,{onViewChange:t,currentView:n,onConsoleClick:a,showConsole:r})]}),(0,i.jsx)(H.x4,{children:(0,i.jsx)(p,ee({},e))})]})})}))}):(0,i.jsx)("div",{className:"flex flex-row-reverse bg-gray-100 dark:bg-dark-90",children:(0,i.jsx)(q,{onViewChange:t,currentView:n,onConsoleClick:a,showConsole:r})})};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(e){var t=e.showConsole,n=e.tabs,o=e.onViewChange,a=e.currentView,r=e.onTabSelect,s=e.onRemoveTab,d=e.onConsoleClick,l=e.toggleProjectHints,c=n.selectedIndex,u=n.openTabs;return(0,i.jsxs)(H.mQ,{selectedIndex:c,onSelect:function(e){return r(e)},children:[(0,i.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-dark-90",children:[(0,i.jsx)(H.td,{className:"flex border-0 p-0 m-0 overflow-x-scroll",children:u.map((function(e,t){return(0,i.jsx)(Q,{name:e,icon:M.hi[e],index:t,onRemoveTab:s,isSelected:t===c,cb:e===M.yz.HINTS?l:function(){}})}))}),(0,i.jsx)(q,{onViewChange:o,currentView:a,onConsoleClick:d,showConsole:t})]}),u.map((function(t){var n=X[t];return(0,i.jsx)(H.x4,{children:(0,i.jsx)(n,re({},e))})}))]})},de=n(80944),le=n(37103),ce=n(92526);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.judgeHints,[]);return t=[].concat((0,a.Z)(t),[M.yz.RESULTS])},ge=function(e){var t,n=e.executionConfig,o=n.additionalContent,i=n.stdin,a=n.language,r=n.dockerExecutionContext,s=n.entryFileName,d=n.timeLimit,l=n.comp_id,c=n.type,u=n.judgeContentPrepend,p=n.sourceCode,h=e.judgeContent,g=h.test_output_on_console,f=h.authorCode,v=e.isDraft,C=e.authorId,m=e.workId,y=e.pageType,x=e.pageId,j=e.projectId;if(Object.keys(null!==r&&void 0!==r?r:{}).length>0){var b=r.job;t={container_image_name:r.imageName,envs:r.envs,entry_filename:b.inputFileName,build_script:b.buildScript,run_script:b.runScript}}var S=u&&u.trim().length>0?"".concat(u.trim(),"\n"):"";return{stdin:i,work_id:m,page_id:x,language:a,work_type:y,author_id:C,time_limit:d,project_id:j,source_code:S+="".concat(p,"\n").concat(f),is_draft_page:v,entry_filename:s,comp_id:l||null,test_output_on_console:!!g,comp_type:c||M.Uv.CODE,additional_files:JSON.stringify(o),docker_container:t?JSON.stringify(t):void 0}},fe={ERROR:300},ve={loading:!1,loaded:!1},Ce={test_results:[],execution_result:{stderr:"Unable to Execute Code, Try Again"}},me=function(e){var t=(0,h.useState)(M.UZ.TABS),n=t[0],o=t[1],a=(0,h.useState)(null),r=a[0],s=a[1],d=(0,h.useState)(!1),l=d[0],c=d[1],u=(0,h.useState)({openTabs:he(e),selectedIndex:0}),p=u[0],g=u[1],f=e.showHints,v={executionConfig:e.executionConfig,judgeContent:e.judgeContent,isDraft:e.isDraft,authorId:e.authorId,workId:e.workId,pageType:e.pageType,pageId:e.pageId,projectId:e.projectId},C=(0,h.useRef)({judgeProps:v,tabs:p,currentView:n,showConsole:l});(0,h.useEffect)((function(){C.current={judgeProps:v,tabs:p,currentView:n,showConsole:l}})),(0,h.useEffect)((function(){return le.ZP.add(m),function(){return le.ZP.remove(m)}}),[]),(0,ce.rf)((function(){if(f)I(M.yz.HINTS);else{var e=b(M.yz.HINTS);-1!==e&&O(e)}}),[f]),(0,h.useEffect)((function(){l&&-1===p.openTabs.indexOf(M.yz.CONSOLE)&&c(!1)}),[p.openTabs]);var m=function(e){e.detail.event===le.lx.TEST&&(S(M.yz.RESULTS),s(pe(pe({},ve),{},{loading:!0})),le.ZP.dispatch(le.lx.JUDGE_LOADING),(0,de.eV)(ge(C.current.judgeProps)).then(JSON.parse).then((function(e){j(e),y(e)})).catch(x).finally((function(){return le.ZP.dispatch(le.lx.JUDGE_LOADED)})))},y=function(e){return le.ZP.dispatch(le.lx.COMPONENT_COMPLETED,{status:e.test_results[0].succeeded})},x=function(){S(M.yz.CONSOLE),s(Ce)},j=function(e){s(pe(pe(pe({},e),ve),{},{loaded:!0})),e.execution_result.status===fe.ERROR&&(S(M.yz.CONSOLE),!C.current.showConsole&&c(!C.current.showConsole))},b=function(e){return C.current.tabs.openTabs.findIndex((function(t){return t===e}))},S=function(e){return-1===b(e)?I(e):function(e){return Z(b(e))}(e)},w=function(){return g(D()(C.current.tabs,{selectedIndex:{$set:0}}))},O=function(e){return g(D()(C.current.tabs,{openTabs:{$splice:[[e,1]]}}))},Z=function(e){return e!==C.current.tabs.selectedIndex&&g(D()(C.current.tabs,{selectedIndex:{$set:e}}))},I=function(e){return g(D()(C.current.tabs,{openTabs:{$push:[e]},selectedIndex:{$set:C.current.tabs.openTabs.length}}))},k=pe(pe({},e),{},{executionResult:r,setShowConsole:c,onConsoleClick:function(){l?O(b(M.yz.CONSOLE)):I(M.yz.CONSOLE),c(!C.current.showConsole)},onViewChange:function(e){e!==C.current.currentView&&(o(e),w())},currentView:n,showConsole:l,onTabSelect:Z,onRemoveTab:O,tabs:p});return n===M.UZ.TABS?(0,i.jsx)(se,pe({},k)):(0,i.jsx)(ie,pe({},k))},ye=n(54492),xe=n(99583),je=n(35589),be=n(28571),Se=n(65348),we=n(50973),Oe=n(57780),Ze=n(30107),Ie=n(68907),ke=n(98735),Ee=n(97810),Te=n(28100),De=n(96796),Pe=n(78854),He=n(54783);function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=(0,Pe.$j)((function(e){var t,n;return{showStaleCodeWarning:(null===(t=e.author.collection.instance)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.show_stale_code_warning)||!1}}),(function(e){return{dispatch:e}})),Ae=(0,P.default)((function(){return n.e(47533).then(n.bind(n,47533))}),{ssr:!1,loadableGenerated:{webpack:function(){return[47533]},modules:["../components/widgets/Code/index.tsx -> react-split"]}}),Fe={prependCode:"\n\n",appendCode:"\n\n",codeSelection:"prependCode"},Ve=function(e){var t,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.languages;return Re(Re({title:e.title,content:e.content||(null===r||void 0===r||null===(n=r[e.language])||void 0===n?void 0:n.hello_world),entryFileName:e.entryFileName||(null===r||void 0===r||null===(o=r[e.language])||void 0===o?void 0:o.entry_filename),additionalContent:e.additionalContent||[],selectedIndex:e.selectedIndex||0,caption:e.caption,language:e.language,evaluateLanguage:e.evaluateLanguage,theme:e.theme,runnable:e.runnable||!1,timeLimit:e.timeLimit||f.M9,judge:e.judge||!1,judgeContent:e.judgeContent,judgeHints:e.judgeHints||null,judgeContentPrepend:e.judgeContentPrepend||"\n\n\n",allowDownload:e.allowDownload||!1,treatOutputAsHTML:e.treatOutputAsHTML||!1,readOnlyApiKeys:e.readOnlyApiKeys||!1,transformOutput:e.transformOutput||!1,enableHiddenCode:e.enableHiddenCode||!1,enableStdin:e.enableStdin||!1,evaluateWithoutExecution:e.evaluateWithoutExecution||!1,showSolution:e.showSolution||!1,solutionContent:e.solutionContent||"\n\n\n",hiddenCodeContent:e.hiddenCodeContent||Fe,highlightedLines:e.highlightedLines,version:e.version,dockerJob:e.dockerJob||{},specialInput:e.specialInput||C.Zs,outputTransformCode:e.outputTransformCode||m.v,selectedApiKeys:e.selectedApiKeys||{},selectedEnvVars:e.selectedEnvVars||{},isCodeDrawing:e.isCodeDrawing||!1,imageId:e.ImageId||"",isAssessment:e.isAssessment,isProject:e.isProject,assessmentId:e.assessmentId},i),{},{outputImageHeight:e.outputImageHeight||f.f5})},Me=function(e){(0,l.Z)(n,e);var t=Ne(n);function n(e,o){var i,d,l,c;(0,r.Z)(this,n),c=t.call(this,e,o),(0,p.Z)((0,s.Z)(c),"migrated",!1),(0,p.Z)((0,s.Z)(c),"componentWillUnmount",(function(){var e=c.props,t=e.content.isProject,n=e.mode;t&&"view"===n&&le.ZP.remove(c.bindProjectListener)})),(0,p.Z)((0,s.Z)(c),"bindProjectListener",(function(e){e.detail.event===le.lx.SAVE&&c.onProjectSave()})),(0,p.Z)((0,s.Z)(c),"updateContentState",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.setState({onlyCodeChanged:t},(function(){return c.props.updateContentState(e)}))})),(0,p.Z)((0,s.Z)(c),"updateSpecialInputData",(function(e){var t=e.specialInputData;c.setState({specialInputData:t})})),(0,p.Z)((0,s.Z)(c),"handleAllowDownloadChange",(function(e){c.updateContentState({allowDownload:e})})),(0,p.Z)((0,s.Z)(c),"handleCaptionChange",(function(e){c.updateContentState({caption:e})})),(0,p.Z)((0,s.Z)(c),"handleEditorChange",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=c.state,i=o.selectedIndex,a=o.additionalContent;if(0===i||void 0===i){var r=(0,v.G$)(e);if("edit"===c.props.mode){var s=c.state.dirty||c.props.content.content!==e;c.setState(Re(Re({onlyCodeChanged:!0,dirty:s},t),{},{entryFileLimit:r}),n),c.props.updateContentState({content:e})}else{var d=c.state.dirty||c.state.content!==e;c.setState(Re({content:e,onlyCodeChanged:!0,dirty:d,entryFileLimit:r},t),n)}}else if(a.length>0){var l=c.state.dirty||a[i-1].content!==e,u=D()(a,(0,p.Z)({},i-1,{content:{$set:e}})),h=(0,v.$O)(u);"edit"===c.props.mode?(c.setState(Re(Re({onlyCodeChanged:!0,dirty:l},t),{},{additionalFilesLimit:h}),n),c.props.updateContentState({additionalContent:u})):c.setState(Re(Re({additionalContent:u,onlyCodeChanged:!0,dirty:l},t),{},{additionalFilesLimit:h}),n)}})),(0,p.Z)((0,s.Z)(c),"handleSimpleEditorChange",(function(e){c.handleEditorChange(e,{})})),(0,p.Z)((0,s.Z)(c),"handleSelectedIndexChange",(function(e){var t="edit"!==c.props.mode?c.state:c.props.content;t.isAssessment?c.updateContentState({selectedIndex:e}):t.isProject&&c.updateContentState(Re(Re({},t),{},{selectedIndex:e})),c.setState({selectedIndex:e,onlyCodeChanged:!1})})),(0,p.Z)((0,s.Z)(c),"handleJudgeChange",(function(e){c.updateContentState({judge:e,enableHiddenCode:!1,evaluateWithoutExecution:!1,evaluateLanguage:null})})),(0,p.Z)((0,s.Z)(c),"handleJudgeContentChange",(function(e,t,n){var o=!1;c.props.content.judgeContent&&(e.edCode!==c.props.content.judgeContent.edCode||e.version!==c.props.content.judgeContent.version||t||(o=!0));var i=n||c.props.content.content;c.updateContentState({judgeContent:e,content:i},o)})),(0,p.Z)((0,s.Z)(c),"handleJudgeHintsChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.setState((0,xe.ZP)((function(t){t.judgeHints=e}))),c.updateContentState({judgeHints:e},t)})),(0,p.Z)((0,s.Z)(c),"handleJudgeContentPrependChange",(function(e){c.updateContentState({judgeContentPrepend:e},!0)})),(0,p.Z)((0,s.Z)(c),"handleHiddenCodeContentChange",(function(e,t){c.updateContentState({hiddenCodeContent:e},!t)})),(0,p.Z)((0,s.Z)(c),"handleShowSolutionChange",(function(e){c.updateContentState({showSolution:e})})),(0,p.Z)((0,s.Z)(c),"handleSolutionContentChange",(function(e){c.updateContentState({solutionContent:e})})),(0,p.Z)((0,s.Z)(c),"handleLanguageSelect",(function(e){var t,n,o,i,a=null===(t=c.props.executionMetadata)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.languages,r=null===a||void 0===a||null===(o=a[e])||void 0===o?void 0:o.static_entry_name,s=null===a||void 0===a||null===(i=a[e])||void 0===i?void 0:i.entry_filename;c.updateContentState({entryFileName:s,staticEntryName:r,language:e,evaluateLanguage:c.props.content.evaluateWithoutExecution?c.props.content.evaluateLanguage:e})})),(0,p.Z)((0,s.Z)(c),"handleSpecialInputSelect",(function(e){var t=e.target.value;c.updateContentState((function(e){return Re(Re({},e),{},{specialInput:t,enableStdin:e.specialInput!==C.O2&&e.enableStdin})}))})),(0,p.Z)((0,s.Z)(c),"handleApiKeySelection",(function(e){c.updateContentState({selectedApiKeys:e})})),(0,p.Z)((0,s.Z)(c),"handleEnvVarSelection",(function(e){c.updateContentState({selectedEnvVars:e})})),(0,p.Z)((0,s.Z)(c),"handleMultiChange",(function(e){c.updateContentState(Re({},e)),void 0!==e.selectedIndex&&c.setState({selectedIndex:e.selectedIndex})})),(0,p.Z)((0,s.Z)(c),"handleRunnableChange",(function(e){c.updateContentState({runnable:e})})),(0,p.Z)((0,s.Z)(c),"handleThemeSelect",(function(e){c.updateContentState({theme:e})})),(0,p.Z)((0,s.Z)(c),"handleTreatOutputAsHTMLChange",(function(e){c.updateContentState({treatOutputAsHTML:e})})),(0,p.Z)((0,s.Z)(c),"handleTransformOutputChange",(function(e){c.updateContentState({transformOutput:e})})),(0,p.Z)((0,s.Z)(c),"handleEnableHiddenCodeChange",(function(e){c.updateContentState({enableHiddenCode:e})})),(0,p.Z)((0,s.Z)(c),"handleEnableReadOnlyApiKeys",(function(e){c.updateContentState({readOnlyApiKeys:e})})),(0,p.Z)((0,s.Z)(c),"handleEnableStdinChange",(function(e){c.updateContentState((function(e){e.enableStdin=!e.enableStdin,e.specialInput=e.enableStdin&&e.specialInput===C.O2?C.Zs:e.specialInput}))})),(0,p.Z)((0,s.Z)(c),"handleEvaluateWithoutExecutionChange",(function(e){c.props.updateContentState({evaluateWithoutExecution:e})})),(0,p.Z)((0,s.Z)(c),"handleEvaluateLanguageChange",(function(e){c.updateContentState({evaluateLanguage:e})})),(0,p.Z)((0,s.Z)(c),"handleHighlightedLinesChange",(function(e){var t=c.props.content.additionalContent,n=void 0===t?[]:t,o=c.state.selectedIndex;c.updateContentState((function(t){0===o||void 0===o?t.highlightedLines=e:n.length>0&&(t.additionalContent[o-1].highlightedLines=e)}))})),(0,p.Z)((0,s.Z)(c),"changeFileReadonlyStatus",(function(e){var t=c.props.content.additionalContent,n=void 0===t?[]:t,o=c.state.selectedIndex;c.updateContentState((function(t){o?n.length>0&&(t.additionalContent[o-1].readOnly=e):t.readOnly=e,!e&&t.readOnlyApiKeys&&(t.readOnlyApiKeys=!1)}))})),(0,p.Z)((0,s.Z)(c),"getSelectedFileProperty",(function(e){var t,n=c.state.selectedIndex;return n?null===(t=c.props.content.additionalContent[n-1])||void 0===t?void 0:t[e]:c.props.content[e]})),(0,p.Z)((0,s.Z)(c),"handleTimeLimitChange",(function(e){c.updateContentState({timeLimit:e})})),(0,p.Z)((0,s.Z)(c),"handleOutputImageHeightChange",(function(e){c.updateContentState({outputImageHeight:e})})),(0,p.Z)((0,s.Z)(c),"getHighlightedLines",(function(){var e=c.props.content,t=e.additionalContent,n=void 0===t?[]:t,o=e.highlightedLines,i=c.state.selectedIndex;return 0===i||void 0===i?o:n.length>0?n[i-1].highlightedLines:[]})),(0,p.Z)((0,s.Z)(c),"handleSaveUserData",(function(e){var t=e.reset,n=void 0!==t&&t;if(n||!c.props.userId||c.state.dirty){var o=c.props.content.comp_id,i=n?null:c.getContentState(!0);c.props.saveWidgetUserData(i,{compId:o,reset:n}),c.setState({dirty:!1})}})),(0,p.Z)((0,s.Z)(c),"onProjectSave",(function(){c.props.isEditorPage||c.handleSaveUserData({reset:!1})})),(0,p.Z)((0,s.Z)(c),"handleResetUserData",(function(){c.props.userId&&c.state.hasSnapshot&&c.handleSaveUserData({reset:!0}),c.setState({onlyCodeChanged:!1,dirty:!1}),c.setState(Re({},c.getDefaultContentState()))})),(0,p.Z)((0,s.Z)(c),"keydownHandler",(function(e){if(c.props.allowWidgetUserData){var t=e.metaKey,n=e.ctrlKey,o="s"===e.key,i="Enter"===e.key;(t||n)&&o?(e.preventDefault(),c.handleSaveUserData({reset:!1})):(t||n)&&i&&(e.preventDefault(),le.ZP.dispatch(le.wn.RUN))}})),(0,p.Z)((0,s.Z)(c),"handleStdinChange",(function(e){c.setState({stdin:e.target.value})})),(0,p.Z)((0,s.Z)(c),"getAdditionalContent",(function(){var e={},t=c.state.specialInputData,n="edit"!==c.props.mode?c.state:c.props.content,o=n.additionalContent,i=n.specialInput;return o&&(e=o.reduce((function(e,t){return Re(Re({},e),{},(0,p.Z)({},t.fileName,t.content))}),e)),[C.Ol,C.Wz].includes(i)&&t?e=Re(Re({},e),{},{"__ed_input.png":{encoding:"base64",content:t.split(",")[1]}}):i===C.O2&&(e=Re(Re({},e),{},{"__ed_input.txt":{encoding:"utf8",content:c.state.stdin}})),e})),(0,p.Z)((0,s.Z)(c),"findUnReplacedKeys",(function(e,t){var n=e.sourceCode,o=void 0===n?"":n,i=e.additionalContent,r=void 0===i?[]:i,s=e.hiddenCodeContent,d=void 0===s?{}:s,l=e.enableHiddenCode,c=void 0!==l&&l,u=new Set([]),p=c?[null===d||void 0===d?void 0:d.appendCode,null===d||void 0===d?void 0:d.prependCode]:[];return Object.keys(t).forEach((function(e){[o].concat((0,a.Z)(r.map((function(e){return null===e||void 0===e?void 0:e.content}))),p).forEach((function(t){!u.has(e)&&(0,w.iD)(t,e)&&u.add(e)}))})),Array.from(u)})),(0,p.Z)((0,s.Z)(c),"clearPendingRun",(function(){""!==c.state.pendingRun&&c.setState({pendingRun:""})})),(0,p.Z)((0,s.Z)(c),"renderReplacementWrapper",(function(e){var t,n,o;if(0===Object.keys(c.props.apiKeysToReplace).length)return c.clearPendingRun(),!1;var i=Boolean(c.props.contentSnapshot)?c.props.contentSnapshot:c.props.content,a=(0,w.m5)(c.state.dirty?c.state:i,c.props.renderMode,c.props.apiKeysToReplace,null===(t=c.props)||void 0===t||null===(n=t.docker)||void 0===n||null===(o=n.container)||void 0===o?void 0:o.liveInstance),r=c.findUnReplacedKeys({sourceCode:a.content,additionalContent:a.additionalContent,hiddenCodeContent:a.hiddenCodeContent,enableHiddenCode:a.enableHiddenCode},c.props.apiKeysToReplace);return r.length>0&&(e="",c.props.renderReplacementWrapper(r)),c.setState({content:a.content,additionalContent:a.additionalContent,onlyCodeChanged:!1,pendingRun:e}),!0})),(0,p.Z)((0,s.Z)(c),"getEditorAndOutputHeights",(function(e){var t=window.innerHeight-M.jw-M.iv-M.TN;return{editorHeight:t,outputHeight:e?c.state.isStdinOpen?t-M.Iy:t-M.I_:t}})),(0,p.Z)((0,s.Z)(c),"toggleFileTree",(function(){c.setState({isFileTreeOpen:!c.state.isFileTreeOpen})})),(0,p.Z)((0,s.Z)(c),"toggleProjectHints",(function(){return c.setState({projectHintsInView:!c.state.projectHintsInView})}));var u=Boolean(e.contentSnapshot),h=u?e.contentSnapshot:e.content,g=(0,w.m5)(h,c.props.renderMode,c.props.apiKeysToReplace,null===(i=c.props)||void 0===i||null===(d=i.docker)||void 0===d||null===(l=d.container)||void 0===l?void 0:l.liveInstance),f="view"!==e.mode?Ve(h,null,e.executionMetadata):Ve(c.props.content,g,e.executionMetadata);return c.state=Re(Re({},f),{},{onlyCodeChanged:!1,hasSnapshot:u,dirty:!1,dockerExecutionContext:(0,S.gp)(c.props.docker,f.dockerJob),additionalFilesLimit:(0,v.$O)(f.additionalContent),entryFileLimit:(0,v.G$)(f.content),specialInputData:"",stdin:"",pendingRun:"",isStdinOpen:!0,isFileTreeOpen:!1,projectHintsInView:!1}),c}return(0,d.Z)(n,null,[{key:"getComponentDefault",value:function(){return O.Z}}]),(0,d.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.executionMetadata,n=e.updateContentState,o=e.content,i=e.docker,a=e.mode;if(!this.migrated&&null!==t&&void 0!==t&&t.loaded){var r,s=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.languages,d=(0,j.z)(o,i,s);o.version!==d.version&&n(d),this.migrated=!0}o.isProject&&"view"===a&&le.ZP.add(this.bindProjectListener)}},{key:"componentDidUpdate",value:function(e){if(!g.equals(this.props,e)){var t=Boolean(this.props.contentSnapshot),n=t?this.props.contentSnapshot:this.props.content,o={};if("view"!==this.props.mode)o=Ve(n,null,this.props.executionMetadata);else{var i,a,r,s=(0,w.m5)(this.state.dirty?this.state:n,this.props.renderMode,this.props.apiKeysToReplace,null===(i=this.props)||void 0===i||null===(a=i.docker)||void 0===a||null===(r=a.container)||void 0===r?void 0:r.liveInstance);o=Ve(this.props.content,s,this.props.executionMetadata)}this.setState(Re(Re({},o),{},{selectedIndex:this.state.selectedIndex,onlyCodeChanged:!1,hasSnapshot:t,dockerExecutionContext:(0,S.gp)(this.props.docker,o.dockerJob)}))}var d,l,c=this.props,u=c.executionMetadata,p=c.updateContentState,h=c.content,f=c.docker;if(!this.migrated&&null!==u&&void 0!==u&&u.loaded){var v,C=null===u||void 0===u||null===(v=u.data)||void 0===v?void 0:v.languages,m=(0,j.z)(h,f,C);h.version!==m.version&&p(m),this.migrated=!0}null!==u&&void 0!==u&&u.loaded&&void 0===(null===h||void 0===h?void 0:h.content)&&"edit"===this.props.mode&&p({content:null===(l=(null===u||void 0===u||null===(d=u.data)||void 0===d?void 0:d.languages)[null===h||void 0===h?void 0:h.language])||void 0===l?void 0:l.hello_world})}},{key:"getContentState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ve(e?this.state:this.props.content,{saveVersion:this.props.saveVersion},this.props.executionMetadata)}},{key:"getDefaultContentState",value:function(){return Ve(this.props.content,null,this.props.executionMetadata)}},{key:"saveComponent",value:function(){this.props.updateContentState(this.getContentState(!0))}},{key:"handleDockerJobChanged",value:function(e){var t,n,o,i=this.props.content.language,a=this.props.executionMetadata,r=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.languages,s=(0,S.gp)(this.props.docker,e),d=null===s||void 0===s||null===(n=s.job)||void 0===n?void 0:n.inputFileName;e||(d=null===r||void 0===r||null===(o=r[i])||void 0===o?void 0:o.entry_filename);this.props.updateContentState({dockerExecutionContext:s,dockerJob:e,entryFileName:d})}},{key:"getCodeTheme",value:function(){return"view"===this.props.mode&&this.props.userThemes?this.props.userThemes:"default"===this.state.theme&&this.props.default_themes||this.props.default_themes&&this.props.default_themes.isForced.Code?this.props.default_themes.Code:this.state.theme}},{key:"getUserDataActions",value:function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.props.showStaleCodeWarning&&this.state.hasSnapshot&&!(null!==(e=this.props.contentSnapshot)&&void 0!==e&&e.saveVersion),r=(null===(t=this.props.contentSnapshot)||void 0===t?void 0:t.saveVersion)&&(null===(n=this.props.contentSnapshot)||void 0===n?void 0:n.saveVersion)<this.props.saveVersion,s="view"===this.props.mode&&(r||a);return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(ke.Z,{trigger:["hover"],placement:"bottom",overlay:(0,i.jsx)(Ee.Z,{children:"The author has updated the code in this widget. Press 'Reset' to get the latest changes."}),children:(0,i.jsx)(Oe.Z,{className:"stroke-current text-error dark:text-error-light"})}),(0,i.jsx)(x.Z,{isContentDirty:this.state.dirty,hasSnapshot:this.state.hasSnapshot,saveUserData:this.handleSaveUserData,resetUserData:this.handleResetUserData,compId:this.props.content.comp_id,disableSave:o})]})}},{key:"render",value:function(){var e,t,n,o,a,r,s,d,l,c=this,u="edit"!==this.props.mode,p=this.getSelectedFileProperty("readOnly"),h=!!this.props.config&&this.props.config.inEditor,g=null===(e=this.props.executionMetadata)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.languages,f=u?this.state:this.props.content,v=null===g||void 0===g||null===(n=g[f.language])||void 0===n?void 0:n.entry_filename,C=f.isCodeDrawing||!1,m=f.isAssessment,x=this.props.isFreeTextView,j=f.assessmentId,O=this.props.content.projectId,T=u&&C,D=f.isProject,P=D&&"view"===this.props.mode,H=this.getEditorAndOutputHeights(f.enableStdin),N=H.editorHeight,L=H.outputHeight,R=this.props.isFreeTextWidget;u||(f=Re(Re({},f),{},{dockerExecutionContext:(0,S.gp)(this.props.docker,null!==(o=this.props.content.dockerJob)&&void 0!==o?o:{})})),void 0===f.entryFileName&&(f=Re(Re({},f),{},{entryFileName:v}));var _=this.state,A=_.additionalFilesLimit,F=_.entryFileLimit,V=f.content;if(f.runnable&&f.enableHiddenCode){var M,U,W,K=f.hiddenCodeContent||Fe,z=K.prependCode,J=K.appendCode;V="".concat(z,"\n").concat(V,"\n").concat(J,"\n"),Object.keys(this.props.apiKeysToReplace).length&&(V=(0,w.m5)({content:V},this.props.renderMode,this.props.apiKeysToReplace,null===(M=this.props)||void 0===M||null===(U=M.docker)||void 0===U||null===(W=U.container)||void 0===W?void 0:W.liveInstance).content)}var B=null;this.props.content.isCodeDrawing&&this.props.content.imageId&&(B=this.props.shotId?"".concat((0,ye.Z)(!1,!1,null,null,this.props.content.imageId,null,this.props.shotId,null)):"".concat((0,ye.Z)(!!this.props.collectionId,this.props.isDraft,this.props.authorId,this.props.pageId,this.props.content.imageId,this.props.collectionId,null,null))),!(0,De.EE)(null===(a=f)||void 0===a?void 0:a.dockerJob)||u||0===Object.keys(null!==(r=this.props.docker)&&void 0!==r?r:{}).length||null!==(s=f)&&void 0!==s&&s.dockerExecutionContext||(f=Re(Re({},f),{},{dockerExecutionContext:(0,S.gp)(this.props.docker,f.dockerJob)}));var $={specialInputData:this.state.specialInputData,additionalContent:this.getAdditionalContent(),stdin:this.state.stdin,language:f.judge&&f.evaluateLanguage||f.language,usercodeLanguage:f.language,sourceCode:V,entryFileName:f.entryFileName,timeLimit:f.timeLimit,comp_id:f.judge&&this.props.content.comp_id||f.comp_id,outputTransformCode:f.outputTransformCode,transformOutput:f.transformOutput,dockerExecutionContext:f.dockerExecutionContext||{},specialInput:f.specialInput,outputImageHeight:f.outputImageHeight,type:this.props.type},G={authorId:this.props.authorId,collectionId:this.props.collectionId,pageId:this.props.pageId,isDraft:this.props.isDraft},Q=this.props.type===Ie.hf.CODE_EVALUATION;u||C||x||(l=(0,i.jsx)(y.GU,{playgroundMode:m||Q,highlightedLines:this.getHighlightedLines(),specialInput:f.specialInput,runnable:f.runnable,judge:f.judge,mainFileSelected:0===this.state.selectedIndex,allowDownload:f.allowDownload,treatOutputAsHTML:f.treatOutputAsHTML,enableHiddenCode:f.enableHiddenCode,enableStdin:f.enableStdin,evaluateWithoutExecution:f.evaluateWithoutExecution,showSolution:f.showSolution,readOnlyApiKeys:f.readOnlyApiKeys,onLanguageSelect:this.handleLanguageSelect,onEvaluateLanguageSelect:this.handleEvaluateLanguageChange,onThemeSelect:this.handleThemeSelect,onRunnableChange:this.handleRunnableChange,onJudgeChange:this.handleJudgeChange,onMultiChange:this.handleMultiChange,onAllowDownloadChange:this.handleAllowDownloadChange,onTreatOutputAsHTMLChange:this.handleTreatOutputAsHTMLChange,onTransformOutputChange:this.handleTransformOutputChange,onEnableHiddenCodeChange:this.handleEnableHiddenCodeChange,onEnableReadOnlyApiKeys:this.handleEnableReadOnlyApiKeys,onEnableStdinChange:this.handleEnableStdinChange,onEvaluateWithoutExecutionChange:this.handleEvaluateWithoutExecutionChange,onShowSolutionChange:this.handleShowSolutionChange,onHighlightedLinesChange:this.handleHighlightedLinesChange,onTimeLimitChange:this.handleTimeLimitChange,onOutputImageHeightChange:this.handleOutputImageHeightChange,docker:this.props.docker,selectedDockerJob:f.dockerJob,onDockerJobChanged:function(){return c.handleDockerJobChanged.apply(c,arguments)},executionMetadata:this.props.executionMetadata,onSpecialInputSelect:this.handleSpecialInputSelect,updateOutputTransformCode:function(e){c.props.updateContentState({outputTransformCode:e})},dispatch:this.props.dispatch,editMode:!0,apiKeys:this.props.apiKeys,selectedApiKeys:f.selectedApiKeys,selectedEnvVars:f.selectedEnvVars,widgetVersion:f.version,handleApiKeySelection:this.handleApiKeySelection,handleEnvVarSelection:this.handleEnvVarSelection,executionConfig:$,lessonParams:G,changeFileReadonlyStatus:this.changeFileReadonlyStatus,readOnly:p,showJobsDropdown:m||D,hideOutputHeight:D,isFreeText:R},"options"));var q=Re(Re({},f),{},{additionalContent:f.additionalContent||[],selectedIndex:this.state.selectedIndex,theme:this.getCodeTheme(),vimMode:this.props.vimMode}),X=0===q.additionalContent.length,Y=this.props.content.centerOutput?{textAlign:"center"}:{},ee=(0,i.jsx)(E.Z,{inView:this.props.inView,readOnly:u,isEditMode:"edit"===this.props.mode&&!x,codeContent:q,onlyCodeChanged:this.state.onlyCodeChanged,onEditorChange:this.handleSimpleEditorChange,onSelectedIndexChange:this.handleSelectedIndexChange,handleMultiChange:this.handleMultiChange,isDraft:this.props.isDraft,inEditor:h,isShot:!!this.props.shotId,isCodeDrawing:C,isSelectedFileReadOnly:p,forcedHeight:P?N:null,isProjectViewer:P,isFileTreeOpen:this.state.isFileTreeOpen}),te=(0,i.jsx)(I.Z,{collectionId:this.props.collectionId,shotId:this.props.shotId,pageId:this.props.pageId,authorId:this.props.authorId,fullWidthFileOutput:f.fullWidthFileOutput,treatOutputAsHTML:f.treatOutputAsHTML,enableHiddenCode:f.enableHiddenCode,enableStdin:f.enableStdin,hiddenCodeContent:f.hiddenCodeContent,onHiddenCodeContentChange:this.handleHiddenCodeContentChange,onlyCodeChanged:this.state.onlyCodeChanged,mode:this.props.mode,codeTheme:this.getCodeTheme(),isDraft:this.props.isDraft,additionalActions:this.props.allowWidgetUserData&&this.getUserDataActions(),inEditor:this.props.config.inEditor,logWidgetInteraction:this.props.logWidgetInteraction,specialInput:f.specialInput,pageType:this.props.pageType,toggleFullScreen:this.props.toggleFullScreen,fullScreen:this.props.fullScreen,fullscreenIconToggle:this.props.fullscreenIconToggle,additionalFilesLimit:A,entryFileLimit:F,editingApiKeys:this.props.editingApiKeys,renderExtractionWrapper:this.props.renderExtractionWrapper,renderReplacementWrapper:function(){return c.renderReplacementWrapper("Runnable")},renderEnvsWrapper:function(){if(!c.props.bypassEnvCheck){var e=c.props,t=e.docker,n=e.content,o=n.selectedEnvVars,i=void 0===o?{}:o,a=n.dockerJob,r=void 0===a?{}:a,s=(0,De.EE)(r)?(0,Te.t)(t,i):[];return!!s.length&&(c.props.renderReplacementWrapper(s,!0),!0)}},bypassCheckCallback:this.props.bypassCheckCallback,bypassEnvCheck:this.props.bypassEnvCheck,executionConfig:$,updateSpecialInputData:this.updateSpecialInputData,handleStdinChange:this.handleStdinChange,isCodeDrawing:C,updateContentState:this.props.updateContentState,pendingRun:"Runnable"===this.state.pendingRun,pendingRunCallback:this.clearPendingRun,isProjectViewMode:P,outputHeight:P?L:null,isStdinEmpty:!this.state.stdin||0===this.state.stdin.length,handleSaveUserData:this.handleSaveUserData,allowWidgetUserData:this.props.allowWidgetUserData}),ne=(0,i.jsx)(k.Z,{collectionId:this.props.collectionId,shotId:this.props.shotId,pageId:this.props.pageId,judgeContent:f.judgeContent,judgeHints:f.judgeHints,judgeContentPrepend:f.judgeContentPrepend,authorId:this.props.authorId,codeTheme:this.getCodeTheme(),evaluateWithoutExecution:f.evaluateWithoutExecution,showSolution:f.showSolution,solutionContent:f.solutionContent,readOnly:u,onlyCodeChanged:this.state.onlyCodeChanged,onJudgeContentChange:this.handleJudgeContentChange,onJudgeHintsUpdate:this.handleJudgeHintsChange,onJudgeContentPrependChange:this.handleJudgeContentPrependChange,onSolutionContentChange:this.handleSolutionContentChange,isDraft:this.props.isDraft,additionalActions:this.props.allowWidgetUserData&&this.getUserDataActions(),logWidgetInteraction:this.props.logWidgetInteraction,specialInput:f.specialInput,pageType:this.props.pageType,toggleFullScreen:this.props.toggleFullScreen,fullScreen:this.props.fullScreen,fullscreenIconToggle:this.props.fullscreenIconToggle,additionalFilesLimit:A,editingApiKeys:this.props.editingApiKeys,entryFileLimit:F,renderExtractionWrapper:this.props.renderExtractionWrapper,renderReplacementWrapper:function(){return c.renderReplacementWrapper("CodeJudge")},executionConfig:$,updateSpecialInputData:this.updateSpecialInputData,isAssessment:m||Q,assessmentId:j,pendingRun:"CodeJudge"===this.state.pendingRun,pendingRunCallback:this.clearPendingRun,isProjectRunClicked:this.props.isProjectRunClicked,isProjectViewMode:P,outputHeight:P?L:null,handleStdinChange:this.handleStdinChange,isStdinEmpty:!this.state.stdin||0===this.state.stdin.length,handleSaveUserData:this.handleSaveUserData,allowWidgetUserData:this.props.allowWidgetUserData}),oe=this.state.projectHintsInView,ie=(0,i.jsxs)("div",{className:"flex ".concat(X?"justify-end":"justify-between"," items-center"),children:[!X&&(0,i.jsx)("div",{className:"ml-8",children:(0,i.jsx)(ke.Z,{placement:"bottom",trigger:["hover"],overlay:(0,i.jsx)(Ee.Z,{id:"file-tree-toggle",children:"".concat(this.state.isFileTreeOpen?"Hide":"Show"," Files")}),children:(0,i.jsx)(je.Z,{zoomOnHover:!0,icon:"Folder",onClick:this.toggleFileTree,size:24})})}),(0,i.jsxs)("div",{className:"flex items-center",children:[this.state.dirty?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(we.Z,{className:"w-3 h-3"}),(0,i.jsx)("span",{className:"p-2",children:"Unsaved"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Ze.Z,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"p-2",children:"Saved"})]}),!(null===(d=f.judgeHints)||void 0===d||!d.length)&&(0,i.jsx)("button",{className:"outlined-default px-3 py-1.5",onClick:function(e){return c.setState((function(e){return Re(Re({},e),{},{projectHintsInView:!oe})}))},children:oe?"Hide Hints":"Need Hints?"}),this.getUserDataActions(!0)]})]}),ae=(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"bg-gray-200",children:(0,i.jsxs)("button",{className:"text-default py-2",onClick:function(){c.setState({isStdinOpen:!c.state.isStdinOpen})},children:["Input",this.state.isStdinOpen?(0,i.jsx)(Se.Z,{className:"icon-right"}):(0,i.jsx)(be.Z,{className:"icon-right"})]})}),this.state.isStdinOpen&&(0,i.jsx)("textarea",{value:this.state.stdin,onChange:this.handleStdinChange,className:"resize-none w-full p-2 h-24 bg-gray-100"})]});return(0,i.jsxs)("div",{className:"code-container ".concat(P?"w-full":""),onKeyDown:this.keydownHandler,children:[(0,i.jsx)(b.Z,{}),l,P?(0,i.jsxs)(Ae,{sizes:[60,40],minSize:400,expandToMin:!1,gutterSize:0,gutterAlign:"center",snapOffset:30,dragInterval:1,direction:"horizontal",cursor:"col-resize",className:"flex flex-auto w-full",gutterStyle:function(){return{cursor:"col-resize",display:"flex","align-items":"center","justify-content":"center"}},gutter:He.Vn,children:[!T&&(0,i.jsxs)("div",{className:"flex flex-col",children:[ie,ee]}),(0,i.jsx)("div",{className:"flex flex-col justify-between",children:Q?(0,i.jsx)(me,{judgeContent:f.judgeContent,judgeHints:f.judgeHints,judgeContentPrepend:f.judgeContentPrepend,showHints:oe,executionConfig:$,toggleProjectHints:this.toggleProjectHints,isDraft:this.props.isDraft,authorId:this.props.authorId,workId:this.props.collectionId,pageType:this.props.pageType,pageId:this.props.pageId,projectId:O}):(0,i.jsxs)(i.Fragment,{children:[f.runnable&&!T?te:null,f.judge?ne:null,f.enableStdin&&ae]})})]}):(0,i.jsxs)(i.Fragment,{children:[!T&&ee,f.runnable&&!T?te:null,f.judge&&!x?ne:null]}),!C&&(0,i.jsx)(Z.Z,{caption:f.caption,readOnly:u,onCaptionChange:this.handleCaptionChange},"caption"),this.props.content.isCodeDrawing&&this.props.content.imageId&&(0,i.jsx)("div",{style:Y,children:(0,i.jsx)("img",{alt:"code_drawing",src:B})})]})}}]),n}(h.Component);(0,p.Z)(Me,"defaultProps",{config:{},vimMode:!1,logWidgetInteraction:function(){return null},apiKeys:[],apiKeysToReplace:{},renderExtractionWrapper:function(){return null},renderReplacementWrapper:function(){return null},editingApiKeys:!1});var Ue=_e(Me)},54492:function(e,t,n){n.d(t,{Z:function(){return i}});var o=function(e,t){if(!e){if(t=t||"Assertion failed",console.assert)console.assert(e,t);else if("undefined"!==typeof Error)throw new Error(t);throw t}},i=function(e,t,n,i,a,r,s,d){return e?t?"/api/author/".concat(n,"/collection/").concat(r,"/page/").concat(i,"/image/").concat(a):"/api/collection/".concat(n,"/").concat(r,"/page/").concat(i,"/image/").concat(a):i?t?"/api/author/page/".concat(i,"/image/").concat(a):"/api/page/".concat(n,"/").concat(i,"/image/").concat(a):s||d?(d?o(!!t||d,"if its not a draft marketing page then editor_page_id should be passed in"):o(!!t||s,"if its not a draft shot then shot_id should be passed in"),s?"/api/edpresso/shot/".concat(s,"/image/").concat(a):d?"/api/page/".concat(d,"/image/download/").concat(a):null):null}},50973:function(e,t,n){var o,i=n(89703);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-circle"},e),o||(o=i.createElement("circle",{cx:12,cy:12,r:10})))}},18622:function(e,t,n){var o,i,a=n(89703);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24},e),o||(o=a.createElement("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"})),i||(i=a.createElement("path",{d:"M21 3H3a2 2 0 00-2 2v14c0 1.1.9 2 2 2h18a2 2 0 002-2V5a2 2 0 00-2-2zm0 16H3V5h10v4h8v10z"})))}},4083:function(e,t,n){var o,i,a=n(89703);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24},e),o||(o=a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),i||(i=a.createElement("path",{d:"M19 5v4H4V5h15m0 10v4H4v-4h15m1-12H3a1 1 0 00-1 1v6c0 .6.5 1 1 1h17c.6 0 1-.5 1-1V4c0-.6-.5-1-1-1zm0 10H3a1 1 0 00-1 1v6c0 .6.5 1 1 1h17c.6 0 1-.5 1-1v-6c0-.6-.5-1-1-1z"})))}}}]);
//# sourceMappingURL=50413-fde4f905895b9a6b38e1.js.map